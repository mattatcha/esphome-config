esphome:
  platformio_options:
    board_upload.maximum_ram_size: 524288

esp32:
  board: esp32-s3-devkitc-1
  variant: esp32s3
  flash_size: 8MB
  cpu_frequency: 240MHZ

  framework:
    type: esp-idf

    advanced:
      enable_idf_experimental_features: true
      execute_from_psram: True
      compiler_optimization: PERF
    sdkconfig_options:
      CONFIG_ESP32S3_DATA_CACHE_64KB: y
      CONFIG_ESP32S3_DATA_CACHE_LINE_64B: y
      CONFIG_SPIRAM_FETCH_INSTRUCTIONS: y
      CONFIG_SPIRAM_RODATA: y

      CONFIG_LV_ATTRIBUTE_FAST_MEM_USE_IRAM: y
      CONFIG_ESP_MAIN_TASK_AFFINITY_CPU1: y
psram:
  mode: octal
  speed: 120MHz

wifi:
  reboot_timeout: 0s # disable reboot on wifi disconnect

api:
  reboot_timeout: 0s # disable reboot on api disconnect

logger:
  # baud_rate: 0
  hardware_uart: UART0
  level: INFO

external_components:
  - source: github://syssi/esphome-jbd-bms@main

i2c:
  sda: ${I2C_SDA}
  scl: ${I2C_SCL}

display:
  - platform: rpi_dpi_rgb
    auto_clear_enabled: false
    update_interval: never
    color_order: RGB
    pclk_frequency: 16MHz
    dimensions:
      width: 800
      height: 480
    de_pin:
      number: 5
    hsync_pin:
      number: 46
      ignore_strapping_warning: true
    vsync_pin:
      number: 3
      ignore_strapping_warning: true
    pclk_pin: 7
    hsync_back_porch: 30
    hsync_front_porch: 210
    hsync_pulse_width: 30
    vsync_back_porch: 4
    vsync_front_porch: 4
    vsync_pulse_width: 4
    data_pins:
      red:
        - 1 #r3
        - 2 #r4
        - 42 #r5
        - 41 #r6
        - 40 #r7
      blue:
        - 14 #b3
        - 38 #b4
        - 18 #b5
        - 17 #b6
        - 10 #b7
      green:
        - 39 #g2
        - 0 #g3
        - 45 #g4
        - 48 #g5
        - 47 #g6
        - 21 #g7

touchscreen:
  id: touch_screen
  platform: gt911
  interrupt_pin: ${TP_IRQ}

globals:
  - id: demo_mode
    type: bool
    restore_value: no
    initial_value: "false"
